<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="game">

    <select id="selectGameById" parameterType="long" resultType="hashmap">
        SELECT
            g.gameNo AS gameId,
            g.gameNm AS gameName,
            g.minPlyrCnt AS numberOfMinPlayer,
            g.maxPlyrCnt AS numberOfMaxPlayer,
            g.refUrl AS referenceUrl
        FROM
            game g
        WHERE
            g.gameNo = #{gameId}
    </select>

    <select id="selectGameList" parameterType="hashmap" resultType="hashmap">
        SELECT
            g.gameNo,
            g.gameNm,
            g.minPlyrCnt,
            g.maxPlyrCnt
        FROM
            game g
        <where>
            <if test="gameName != null and gameName != ''">
        AND
            g.gameNm LIKE CONCAT('%',#{gameName},'%')
            </if>
        </where>
        ORDER BY
            g.gameNm
    </select>

    <select id="selectGameSettingList" parameterType="hashmap" resultType="hashmap">
        SELECT
        gs.nm,
        gs.cd,
        IFNULL(gs.rmrk, '') AS rmrk
        FROM
        game g,
        gameSttng gs
        WHERE
        g.gameNo = gs.gameNo
        AND
        g.gameNo = #{gameNo}
        <if test="groupCode == '1'.toString()">
            AND
            g.sttng1GrpCd = gs.grpCd
            AND
            g.sttng1GrpCd = #{groupCode}
        </if>
        <if test="groupCode == '2'.toString()">
            AND
            g.sttng2GrpCd = gs.grpCd
            AND
            g.sttng2GrpCd = #{groupCode}
        </if>
        <if test="groupCode == '3'.toString()">
            AND
            g.sttng3GrpCd = gs.grpCd
            AND
            g.sttng3GrpCd = #{groupCode}
        </if>
        ORDER BY
        gs.ordr
    </select>

</mapper>
